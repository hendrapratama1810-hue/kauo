<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KAUO VERSE AI</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;user-select:none;}
html,body{width:100%;height:100%;font-family:system-ui,-apple-system;overflow:hidden;}

/* BACKGROUND */
.bg-video{position:fixed;inset:0;z-index:-2;}
.bg-video video{width:100%;height:100%;object-fit:cover;}

/* CENTER */
.center{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;}

/* GLASS CHAT CARD */
.glass{
  width:min(92%,400px);
  height:min(92%,600px);
  padding:20px;
  border-radius:30px;
  background:rgba(255,80,80,0.15);
  backdrop-filter:blur(28px) saturate(180%);
  box-shadow:0 0 60px rgba(255,60,60,0.85),inset 0 0 30px rgba(255,120,120,0.35);
  display:flex;flex-direction:column;
}

/* HEADER */
.header{display:flex;align-items:center;gap:12px;margin-bottom:16px;}
.header button{
  width:40px;height:40px;border-radius:50%;border:none;background:linear-gradient(135deg,#ff7a7a,#ff2b2b);color:white;font-weight:700;cursor:pointer;
  box-shadow:0 0 20px rgba(255,60,60,1);
}
.header .title{text-shadow:0 0 15px rgba(255,60,60,1);font-family:'Orbitron';font-weight:700;color:white;font-size:18px;}
.header .subtitle{font-size:12px;color:#ffe5e5;margin-left:auto;}

/* CHAT AREA */
.chat-area{flex:1;overflow-y:auto;margin-bottom:10px;display:flex;flex-direction:column;gap:8px;}
.chat-bubble{max-width:80%;padding:12px;border-radius:18px;backdrop-filter:blur(18px) saturate(150%);background:rgba(255,60,60,0.2);color:white;word-break:break-word;user-select:none;}
.chat-bubble.ai{align-self:flex-start;background:rgba(255,120,120,0.25);user-select:text;}

/* INPUT AREA */
.input-area{display:flex;gap:8px;}
.input-area input{
  flex:1;padding:12px;border-radius:18px;border:none;outline:none;background:rgba(255,80,80,0.18);color:white;box-shadow:0 0 22px rgba(255,60,60,0.85);
}
.input-area button{
  padding:12px 16px;border-radius:18px;border:none;outline:none;background:linear-gradient(135deg,#ff4d4d,#e60000);color:white;cursor:pointer;box-shadow:0 0 22px rgba(255,40,40,1);
}

/* SCROLLBAR */
.chat-area::-webkit-scrollbar{width:6px;}
.chat-area::-webkit-scrollbar-thumb{background:rgba(255,60,60,0.5);border-radius:3px;}
</style>
</head>

<body>

<div class="bg-video">
  <video src="public/video.mp4" autoplay loop muted playsinline></video>
</div>

<div class="center">
  <div class="glass">

    <div class="header">
      <button onclick="location.href='page2.html'">âŸ¨</button>
      <img src="public/logo.png" alt="logo" style="width:28px;height:28px;border-radius:50%;">
      <div class="title">KAUO VERSE AI V1.0</div>
      <div class="subtitle">Gemini AI Model</div>
    </div>

    <div class="chat-area" id="chatArea">
      <div class="chat-bubble ai">Halo ðŸ‘‹, Selamat Datang di KAUO AI. Mari memulai obrolan pertama mu!</div>
    </div>

    <div class="input-area">
      <input id="userInput" placeholder="Ketik pesan..." />
      <button onclick="sendMessage()">Send</button>
    </div>

  </div>
</div>

<script>
const chatArea = document.getElementById("chatArea");

async function sendMessage(){
  const input = document.getElementById("userInput");
  if(!input.value) return;

  // tampilkan user message
  const userMsg = document.createElement("div");
  userMsg.className = "chat-bubble";
  userMsg.innerText = input.value;
  chatArea.appendChild(userMsg);
  chatArea.scrollTop = chatArea.scrollHeight;

  const prompt = input.value;
  input.value = "";

  // tampilkan typing ai
  const aiMsg = document.createElement("div");
  aiMsg.className = "chat-bubble ai";
  aiMsg.innerText = "...";
  chatArea.appendChild(aiMsg);
  chatArea.scrollTop = chatArea.scrollHeight;

  try {
    const res = await fetch("/api/generate", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({prompt})
    });
    const data = await res.json();
    aiMsg.innerText = data.choices?.[0]?.message?.content || "AI tidak merespon.";
    chatArea.scrollTop = chatArea.scrollHeight;
  } catch (err) {
    aiMsg.innerText = "Server error.";
  }
}
</script>

</body>
</html>